"use server";
import Link from "next/link";
import DesktopMenu from "./desktopMenu";
import NavItem from "./navItem";
import MobileMenu from "./mobileMenu";
import { createClient } from "@/utils/supabase/server";
import { headers } from "next/headers";

export default async function Header() {
  const supabase = createClient();

  const {
    data: { user },
  } = await supabase?.auth?.getUser();
  const heads = headers();
  const pathname = heads.get("x-url");
  return (
    <nav className="flex justify-space-between items-center justify-between border-b border-gray-color p-6 fixed w-full z-10 bg-white/40 backdrop-blur-[5px]">
      <Link href="/">
        <svg
          width="142"
          height="50"
          viewBox="0 0 142 50"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_29_6044)">
            <path
              d="M0.108398 24.1839L2.0871 23.0468C2.96652 24.5125 4.28565 25.6118 6.48421 25.6118C8.53619 25.6118 9.70875 24.7324 9.70875 23.34C9.70875 21.6922 8.38962 21.3257 5.75136 20.5551C3.3707 19.86 1.17214 18.9073 1.17214 16.0492C1.17214 13.4109 3.3707 11.9097 6.15553 11.9097C8.46291 11.9097 10.1485 12.8624 11.2122 14.3636L9.45337 15.7183C8.68498 14.6568 7.62124 13.9972 6.15553 13.9972C4.50773 13.9972 3.51727 14.7656 3.51727 15.9382C3.51727 17.3661 4.43222 17.7703 7.10824 18.5387C9.67322 19.2338 12.1272 20.2598 12.1272 23.1912C12.1272 25.7562 10.4061 27.6971 6.59525 27.6971C3.26188 27.6971 1.09886 26.0848 0.110619 24.1794L0.108398 24.1839Z"
              fill="#0D0D0D"
            />
            <path
              d="M24.3617 22.827V14.4014H22.0166V12.2406H24.3617V4.32581H26.889V12.2384H31.1395V14.3992H26.889V22.8625C26.889 24.8767 27.5841 25.5008 28.6833 25.5008C29.7093 25.5008 30.2578 25.0611 30.7353 24.6214L32.1277 26.2336C31.4682 26.9287 30.2956 27.7349 28.4279 27.7349C26.1206 27.7349 24.3617 26.4157 24.3617 22.8248V22.827Z"
              fill="#0D0D0D"
            />
            <path
              d="M47.7352 26.1248L41.2861 12.2384H44.1065L48.3926 21.6544C48.7968 22.6071 49.0877 24.2194 49.0877 24.2194C49.0877 24.2194 49.3453 22.6071 49.7828 21.6544L53.7402 12.2384H56.3784L46.4872 35.1744H43.8489L47.733 26.1248H47.7352Z"
              fill="#0D0D0D"
            />
            <path
              d="M70.0474 0.954681H67.4824V27.4062H70.0474V0.954681Z"
              fill="#0D0D0D"
            />
            <path
              d="M82.9785 12.2384H85.5435L85.4702 15.2053C86.4229 12.898 88.1085 11.9453 89.9029 11.9453C91.0377 11.9453 91.8438 12.2006 92.5411 12.6781L91.5529 14.9122C91.0776 14.5835 90.4181 14.3259 89.4654 14.3259C87.3046 14.3259 85.5457 15.8649 85.5457 19.4181V27.404H82.9807V12.2384H82.9785Z"
              fill="#0D0D0D"
            />
            <path
              d="M110.275 25.5385C112.546 25.5385 114.085 24.6236 115.074 23.5243L116.648 25.0633C115.256 26.6378 113.242 27.7015 110.272 27.7015C105.289 27.7015 102.064 24.2571 102.064 19.8245C102.064 15.3919 105.471 11.9097 109.906 11.9097C114.778 11.9097 117.71 15.6472 117.528 20.6662H104.632C104.96 23.5598 106.939 25.5385 110.275 25.5385ZM114.965 18.723C114.745 16.1225 113.097 14.0705 109.908 14.0705C107.015 14.0705 105.071 15.9382 104.669 18.723H114.965Z"
              fill="#0D0D0D"
            />
            <path
              d="M126.905 12.2384H129.726L133.756 20.9948C134.232 22.0208 134.598 23.5954 134.598 23.5954C134.598 23.5954 134.929 22.0208 135.404 20.9948L139.362 12.2384H142L134.745 27.6993H134.269L126.905 12.2384Z"
              fill="#0D0D0D"
            />
            <path
              d="M3.06687 41.7101H3.19346L6.33361 48.9498H5.17438L4.76354 47.9371H1.48569L1.07485 48.9498H0L3.06687 41.7101ZM4.3638 47L3.46883 44.7659C3.28895 44.3439 3.11129 43.7021 3.11129 43.7021C3.11129 43.7021 2.94251 44.3462 2.76263 44.7659L1.86766 47H4.36602H4.3638Z"
              fill="#0D0D0D"
            />
            <path
              d="M13.4798 47.5596L14.3969 47.0533C14.7345 47.6129 15.1653 48.0548 16.0403 48.0548C16.7665 48.0548 17.2839 47.664 17.2839 47.0755C17.2839 46.4537 16.862 46.1805 16.0825 45.8319L15.6073 45.6209C14.5635 45.1567 13.9328 44.6304 13.9328 43.5245C13.9328 42.4185 14.7545 41.7012 15.9448 41.7012C16.8931 41.7012 17.5371 42.0588 17.9679 42.8294L17.0929 43.3668C16.8198 42.8938 16.5022 42.6717 15.9448 42.6717C15.3874 42.6717 15.0165 43.0204 15.0165 43.5045C15.0165 44.0419 15.323 44.284 16.0492 44.6015L16.5133 44.8125C17.7347 45.3499 18.3899 45.9185 18.3899 47.0688C18.3899 48.3235 17.4105 49.0497 16.0603 49.0497C14.7101 49.0497 13.8795 48.3746 13.4775 47.564L13.4798 47.5596Z"
              fill="#0D0D0D"
            />
            <path
              d="M23.2398 42.7627H21.1123V41.7834H26.4754V42.7627H24.3457V48.9498H23.2398V42.7627Z"
              fill="#0D0D0D"
            />
            <path
              d="M32.0415 46.6846L29.3232 41.7834H30.5558L32.1791 44.7348C32.4012 45.1345 32.6122 45.7674 32.6122 45.7674C32.6122 45.7674 32.8343 45.1345 33.0452 44.7348L34.6153 41.7834H35.7635L33.1607 46.6202V48.9498H32.0437V46.6846H32.0415Z"
              fill="#0D0D0D"
            />
            <path
              d="M39.0186 41.7834H40.1356V47.9704H43.4445V48.9498H39.0186V41.7834Z"
              fill="#0D0D0D"
            />
            <path
              d="M46.8623 41.7834H51.4149V42.7627H47.9793V45.5454H51.024V46.5047H47.9793V47.9704H51.5614V48.9498H46.8623V41.7834Z"
              fill="#0D0D0D"
            />
            <path
              d="M64.6304 48.9498H63.3446L62.0588 47.0644C61.8589 47.0843 61.659 47.1066 61.4591 47.1066H60.784V48.9498H59.667V41.7834H61.4591C63.4401 41.7834 64.546 42.816 64.546 44.4594C64.546 45.5653 64.0508 46.3248 63.1136 46.7357L64.6304 48.9498ZM61.417 46.1472C62.8405 46.1472 63.409 45.5254 63.409 44.4616C63.409 43.3979 62.8183 42.765 61.417 42.765H60.784V46.1472H61.417Z"
              fill="#0D0D0D"
            />
            <path
              d="M68.1533 41.7834H72.7059V42.7627H69.2704V45.5454H72.315V46.5047H69.2704V47.9704H72.8524V48.9498H68.1533V41.7834Z"
              fill="#0D0D0D"
            />
            <path
              d="M75.7832 41.7834H76.9735L78.5858 45.6297C78.7968 46.105 79.0189 46.9045 79.0189 46.9045C79.0189 46.9045 79.2187 46.1139 79.4408 45.6297L81.0331 41.7834H82.119L79.0633 49.0231H78.9256L75.7854 41.7834H75.7832Z"
              fill="#0D0D0D"
            />
            <path
              d="M84.4893 45.3655C84.4893 43.2269 86.1326 41.6879 88.189 41.6879C90.2455 41.6879 91.8777 43.2269 91.8777 45.3655C91.8777 47.5041 90.2344 49.0431 88.189 49.0431C86.1437 49.0431 84.4893 47.5041 84.4893 45.3655ZM90.7385 45.3655C90.7385 43.8376 89.6836 42.6895 88.189 42.6895C86.6945 42.6895 85.6285 43.8376 85.6285 45.3655C85.6285 46.8934 86.6922 48.0415 88.189 48.0415C89.6858 48.0415 90.7385 46.8934 90.7385 45.3655Z"
              fill="#0D0D0D"
            />
            <path
              d="M95.3887 41.7834H96.5057V47.9704H99.8147V48.9498H95.3887V41.7834Z"
              fill="#0D0D0D"
            />
            <path
              d="M102.924 46.4314V41.7834H104.041V46.367C104.041 47.5263 104.609 48.0415 105.653 48.0415C106.697 48.0415 107.277 47.5241 107.277 46.367V41.7834H108.382V46.4314C108.382 48.1703 107.201 49.0453 105.653 49.0453C104.105 49.0453 102.924 48.1703 102.924 46.4314Z"
              fill="#0D0D0D"
            />
            <path
              d="M113.781 42.7627H111.651V41.7834H117.017V42.7627H114.887V48.9498H113.781V42.7627Z"
              fill="#0D0D0D"
            />
            <path
              d="M121.473 41.7834H120.367V48.9498H121.473V41.7834Z"
              fill="#0D0D0D"
            />
            <path
              d="M125.007 45.3655C125.007 43.2269 126.65 41.6879 128.707 41.6879C130.763 41.6879 132.395 43.2269 132.395 45.3655C132.395 47.5041 130.752 49.0431 128.707 49.0431C126.661 49.0431 125.007 47.5041 125.007 45.3655ZM131.256 45.3655C131.256 43.8376 130.201 42.6895 128.707 42.6895C127.212 42.6895 126.146 43.8376 126.146 45.3655C126.146 46.8934 127.21 48.0415 128.707 48.0415C130.203 48.0415 131.256 46.8934 131.256 45.3655Z"
              fill="#0D0D0D"
            />
            <path
              d="M137.539 44.7659C137.255 44.4594 136.864 43.9642 136.864 43.9642C136.864 43.9642 136.937 44.5549 136.937 44.9968V48.9498H135.904V41.7101H136.051L140.004 45.9562C140.277 46.2516 140.668 46.7579 140.668 46.7579C140.668 46.7579 140.595 46.125 140.595 45.7253V41.7834H141.627V49.0231H141.49L137.539 44.7659Z"
              fill="#0D0D0D"
            />
          </g>
          <defs>
            <clipPath id="clip0_29_6044">
              <rect
                width="142"
                height="48.0906"
                fill="white"
                transform="translate(0 0.954681)"
              />
            </clipPath>
          </defs>
        </svg>
      </Link>
      {pathname !== "/profile" && (
        <div className="mx-auto">
          <div className="hidden md:flex rounded-full border border-black-color p-1 ml-[100px]">
            <NavItem label="Home" path="/" />
            <NavItem label="About" path="/about" />
          </div>
        </div>
      )}
      <MobileMenu user={user} pathname={pathname} />
      <div className="hidden md:flex gap-4 items-center">
        <DesktopMenu user={user} />
      </div>
    </nav>
  );
}
